<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog Application</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --primary: #4361ee;
        --secondary: #3a0ca3;
        --accent: #4cc9f0;
        --light: #f8f9fa;
        --dark: #212529;
        --success: #4bb543;
        --danger: #dc3545;
        --warning: #ffc107;
        --gray: #6c757d;
        --border-radius: 8px;
        --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        --transition: all 0.3s ease;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--dark);
        background-color: #f5f7fb;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        margin-top: 30px;
        padding: 0 20px;
      }

      /* Header Styles */
      header {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        padding: 1rem 0;
        box-shadow: var(--shadow);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .logo {
        font-size: 1.8rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo i {
        color: var(--accent);
      }

      nav ul {
        display: flex;
        list-style: none;
        gap: 20px;
      }

      nav a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        padding: 8px 12px;
        border-radius: var(--border-radius);
        transition: var(--transition);
      }

      nav a:hover,
      nav a.active {
        background-color: rgba(255, 255, 255, 0.2);
      }

      .auth-buttons {
        display: flex;
        gap: 10px;
      }

      .btn {
        padding: 8px 16px;
        border: none;
        border-radius: var(--border-radius);
        font-weight: 500;
        cursor: pointer;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .btn-primary {
        background-color: var(--accent);
        color: white;
      }

      .btn-primary:hover {
        background-color: #3aa8d8;
      }

      .btn-outline {
        background-color: transparent;
        border: 1px solid white;
        color: white;
      }

      .btn-outline:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }

      .btn-success {
        background-color: var(--success);
        color: white;
      }

      .btn-danger {
        background-color: var(--danger);
        color: white;
      }

      .btn-warning {
        background-color: var(--warning);
        color: var(--dark);
      }

      /* Main Content */
      main {
        padding: 2rem 0;
      }

      .page {
        display: none;
      }

      .page.active {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Hero Section */
      .hero {
        background: linear-gradient(
            rgba(67, 97, 238, 0.8),
            rgba(58, 12, 163, 0.9)
          ),
          url("https://images.unsplash.com/photo-1499750310107-5fef28a66643?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80");
        background-size: cover;
        background-position: center;
        color: white;
        padding: 4rem 2rem;
        border-radius: var(--border-radius);
        text-align: center;
        margin-bottom: 2rem;
      }

      .hero h1 {
        font-size: 2.5rem;
        margin-bottom: 1rem;
      }

      .hero p {
        font-size: 1.2rem;
        max-width: 700px;
        margin: 0 auto 2rem;
      }

      /* Blog Grid */
      .section-title {
        font-size: 1.8rem;
        margin-bottom: 1.5rem;
        color: var(--secondary);
        border-left: 4px solid var(--accent);
        padding-left: 10px;
      }

      .blog-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
        margin-bottom: 2rem;
      }

      .blog-card {
        background: white;
        border-radius: var(--border-radius);
        overflow: hidden;
        box-shadow: var(--shadow);
        transition: var(--transition);
      }

      .blog-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
      }

      .blog-card img {
        width: 100%;
        height: 180px;
        object-fit: cover;
      }

      .blog-content {
        padding: 1.5rem;
      }

      .blog-meta {
        display: flex;
        justify-content: space-between;
        font-size: 0.85rem;
        color: var(--gray);
        margin-bottom: 10px;
      }

      .blog-tag {
        background-color: var(--primary);
        color: white;
        padding: 4px 8px;
        border-radius: 20px;
        font-size: 0.75rem;
      }

      .blog-card h3 {
        font-size: 1.3rem;
        margin-bottom: 10px;
        color: var(--dark);
      }

      .blog-card p {
        color: var(--gray);
        margin-bottom: 1rem;
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .blog-actions {
        display: flex;
        justify-content: space-between;
        margin-top: 1rem;
      }

      /* Blog Detail */
      .blog-detail {
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--shadow);
      }

      .blog-header {
        margin-bottom: 2rem;
      }

      .blog-title {
        font-size: 2.2rem;
        margin-bottom: 1rem;
        color: var(--secondary);
      }

      .blog-meta-large {
        display: flex;
        gap: 20px;
        margin-bottom: 1.5rem;
        color: var(--gray);
      }

      .blog-image {
        width: 100%;
        height: 400px;
        object-fit: cover;
        border-radius: var(--border-radius);
        margin-bottom: 1.5rem;
      }

      .blog-body {
        line-height: 1.8;
        font-size: 1.1rem;
      }

      .blog-body p {
        margin-bottom: 1.5rem;
      }

      .blog-body h2 {
        color: var(--secondary);
        margin: 2rem 0 1rem;
      }

      .blog-body blockquote {
        border-left: 4px solid var(--accent);
        padding-left: 1rem;
        margin: 1.5rem 0;
        font-style: italic;
        color: var(--gray);
      }

      /* Forms */
      .form-container {
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--shadow);
        max-width: 800px;
        margin: 0 auto;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
      }

      .form-control {
        width: 100%;
        padding: 12px;
        border: 1px solid #ddd;
        border-radius: var(--border-radius);
        font-size: 1rem;
        transition: var(--transition);
      }

      .form-control:focus {
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
      }

      textarea.form-control {
        min-height: 150px;
        resize: vertical;
      }

      .form-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 2rem;
      }

      /* Dashboard */
      .dashboard-stats {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      .stat-card {
        background: white;
        padding: 1.5rem;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
        text-align: center;
      }

      .stat-card i {
        font-size: 2rem;
        color: var(--primary);
        margin-bottom: 10px;
      }

      .stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: var(--secondary);
      }

      .stat-label {
        color: var(--gray);
        font-size: 0.9rem;
      }

      /* Comments */
      .comments-section {
        margin-top: 3rem;
      }

      .comment {
        background: #f8f9fa;
        padding: 1.5rem;
        border-radius: var(--border-radius);
        margin-bottom: 1.5rem;
      }

      .comment-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
      }

      .comment-author {
        font-weight: 600;
        color: var(--secondary);
      }

      .comment-date {
        color: var(--gray);
        font-size: 0.85rem;
      }

      /* Footer */
      footer {
        background-color: var(--dark);
        color: white;
        padding: 2rem 0;
        margin-top: 3rem;
      }

      .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .footer-links {
        display: flex;
        gap: 20px;
      }

      .footer-links a {
        color: white;
        text-decoration: none;
        transition: var(--transition);
      }

      .footer-links a:hover {
        color: var(--accent);
      }

      /* Responsive */
      @media (max-width: 768px) {
        .header-content {
          flex-direction: column;
          gap: 1rem;
        }

        nav ul {
          flex-wrap: wrap;
          justify-content: center;
        }

        .blog-grid {
          grid-template-columns: 1fr;
        }

        .footer-content {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="container">
        <div class="header-content">
          <div class="logo">
            <i class="fas fa-blog"></i>
            <span>BlogApp</span>
          </div>
          <nav>
            <ul>
              <li>
                <a href="#" class="nav-link active" data-page="home">Home</a>
              </li>
              <li>
                <a href="#" class="nav-link" data-page="blogs">All Blogs</a>
              </li>
              <li>
                <a href="#" class="nav-link" data-page="create">Write Blog</a>
              </li>
              <li>
                <a href="#" class="nav-link" data-page="dashboard">Dashboard</a>
              </li>
            </ul>
          </nav>
          <!-- <div class="auth-buttons">
            <button class="btn btn-outline" id="loginBtn">Login</button>
            <button class="btn btn-primary" id="registerBtn">Register</button>
          </div> -->
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container">
      <!-- Home Page -->
      <section id="home" class="page active">
        <div class="hero">
          <h1>Welcome to BlogApp</h1>
          <p>
            Share your thoughts, ideas, and stories with the world. Create and
            discover amazing blog posts on various topics.
          </p>
          <button class="btn btn-primary" id="startWritingBtn">
            Start Writing <i class="fas fa-pen"></i>
          </button>
        </div>

        <h2 class="section-title">Featured Blogs</h2>
        <div class="blog-grid" id="featuredBlogs">
          <!-- Featured blogs will be loaded here -->
        </div>

        <h2 class="section-title">Recent Blogs</h2>
        <div class="blog-grid" id="recentBlogs">
          <!-- Recent blogs will be loaded here -->
        </div>
      </section>

      <!-- All Blogs Page -->
      <section id="blogs" class="page">
        <h2 class="section-title">All Blog Posts</h2>
        <div class="blog-grid" id="allBlogs">
          <!-- All blogs will be loaded here -->
        </div>
      </section>

      <!-- Create Blog Page -->
      <section id="create" class="page">
        <h2 class="section-title">Create New Blog Post</h2>
        <div class="form-container">
          <form id="blogForm">
            <div class="form-group">
              <label for="blogTitle">Title</label>
              <input
                type="text"
                id="blogTitle"
                class="form-control"
                placeholder="Enter blog title"
                required
              />
            </div>
            <div class="form-group">
              <label for="blogImage">Image URL</label>
              <input
                type="text"
                id="blogImage"
                class="form-control"
                placeholder="Enter image URL"
              />
            </div>
            <div class="form-group">
              <label for="blogCategory">Category</label>
              <select id="blogCategory" class="form-control" required>
                <option value="">Select a category</option>
                <option value="Technology">Technology</option>
                <option value="Travel">Travel</option>
                <option value="Food">Food</option>
                <option value="Lifestyle">Lifestyle</option>
                <option value="Health">Health</option>
                <option value="Business">Business</option>
              </select>
            </div>
            <div class="form-group">
              <label for="blogContent">Content</label>
              <textarea
                id="blogContent"
                class="form-control"
                placeholder="Write your blog content here..."
                rows="15"
                required
              ></textarea>
            </div>
            <div class="form-actions">
              <button type="button" class="btn btn-outline" id="cancelBtn">
                Cancel
              </button>
              <button type="submit" class="btn btn-primary">
                Publish Blog
              </button>
            </div>
          </form>
        </div>
      </section>

      <!-- Blog Detail Page -->
      <section id="blog-detail" class="page">
        <div class="blog-detail" id="blogDetailContent">
          <!-- Blog detail will be loaded here -->
        </div>
      </section>

      <!-- Dashboard Page -->
      <section id="dashboard" class="page">
        <h2 class="section-title">Dashboard</h2>

        <div class="dashboard-stats">
          <div class="stat-card">
            <i class="fas fa-file-alt"></i>
            <div class="stat-number" id="totalBlogs">0</div>
            <div class="stat-label">Total Blogs</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-eye"></i>
            <div class="stat-number" id="totalViews">0</div>
            <div class="stat-label">Total Views</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-comments"></i>
            <div class="stat-number" id="totalComments">0</div>
            <div class="stat-label">Total Comments</div>
          </div>
          <div class="stat-card">
            <i class="fas fa-calendar-alt"></i>
            <div class="stat-number" id="blogsThisMonth">0</div>
            <div class="stat-label">This Month</div>
          </div>
        </div>

        <h3 class="section-title">My Blogs</h3>
        <div class="blog-grid" id="myBlogs">
          <!-- User's blogs will be loaded here -->
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="footer-content">
          <div class="logo">
            <i class="fas fa-blog"></i>
            <span>BlogApp</span>
          </div>
          <div class="footer-links">
            <a href="#">About</a>
            <a href="#">Contact</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
          </div>
          <div>&copy; 2023 BlogApp. All rights reserved.</div>
        </div>
      </div>
    </footer>

    <script>
      // Sample blog data
      let blogs = JSON.parse(localStorage.getItem("blogs")) || [
        {
          id: 1,
          title: "Getting Started with JavaScript",
          image:
            "https://images.unsplash.com/photo-1627398242454-45a1465c2479?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          content:
            "JavaScript is a versatile programming language that powers the interactive elements of websites. In this blog post, we'll explore the basics of JavaScript and how you can get started with this powerful language.",
          author: "John Doe",
          date: "2023-05-15",
          category: "Technology",
          views: 124,
          comments: 8,
        },
        {
          id: 2,
          title: "The Art of Cooking Pasta",
          image:
            "https://images.unsplash.com/photo-1551183053-bf91a1d81141?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          content:
            "Cooking the perfect pasta is both a science and an art. From selecting the right type of pasta to mastering the al dente texture, this guide will help you create restaurant-quality pasta dishes at home.",
          author: "Jane Smith",
          date: "2023-06-22",
          category: "Food",
          views: 89,
          comments: 12,
        },
        {
          id: 3,
          title: "Top Travel Destinations for 2023",
          image:
            "https://images.unsplash.com/photo-1488646953014-85cb44e25828?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          content:
            "As travel restrictions ease, many are planning their next big adventure. Here are the top travel destinations for 2023 that offer unique experiences, breathtaking landscapes, and rich cultural heritage.",
          author: "Mike Johnson",
          date: "2023-04-10",
          category: "Travel",
          views: 156,
          comments: 5,
        },
        {
          id: 4,
          title: "Mindfulness and Meditation",
          image:
            "https://images.unsplash.com/photo-1544367567-0f2fcb009e0b?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          content:
            "In our fast-paced world, mindfulness and meditation have become essential practices for mental well-being. Learn how to incorporate these practices into your daily routine for reduced stress and improved focus.",
          author: "Sarah Williams",
          date: "2023-07-05",
          category: "Health",
          views: 203,
          comments: 15,
        },
        {
          id: 5,
          title: "Getting Started with Vue js",
          image: "../assets/images/vue-code.png",
          content:
            "Vue js is a versatile programming language that powers the interactive elements of websites. In this blog post, we'll explore the basics of JavaScript and how you can get started with this powerful language.",
          author: "Bukola Adesoye",
          date: "2023-05-25",
          category: "Tech",
          views: 14,
          comments: 8,
        },
        {
          id: 6,
          title: "10 Healthy Breakfast Ideas",
          image:
            "https://images.unsplash.com/photo-1551782450-17144efb9c50?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
          content:
            "Start your day right with these nutritious and delicious breakfast options. From quick smoothies to hearty oatmeal bowls, we've got ideas for every morning routine.",
          author: "Nutritionist Mike",
          date: "2023-11-05",
          category: "Food",
          views: 78,
          comments: 7,
        },
      ];

      // DOM Elements
      const pages = document.querySelectorAll(".page");
      const navLinks = document.querySelectorAll(".nav-link");
      const featuredBlogsContainer = document.getElementById("featuredBlogs");
      const recentBlogsContainer = document.getElementById("recentBlogs");
      const allBlogsContainer = document.getElementById("allBlogs");
      const myBlogsContainer = document.getElementById("myBlogs");
      const blogDetailContainer = document.getElementById("blogDetailContent");
      const blogForm = document.getElementById("blogForm");
      const startWritingBtn = document.getElementById("startWritingBtn");
      const cancelBtn = document.getElementById("cancelBtn");

      // Initialize the app
      document.addEventListener("DOMContentLoaded", function () {
        displayFeaturedBlogs();
        displayRecentBlogs();
        displayAllBlogs();
        displayMyBlogs();
        updateDashboardStats();

        // Set up event listeners
        setupEventListeners();
      });

      // Set up event listeners
      function setupEventListeners() {
        // Navigation
        navLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            const pageId = this.getAttribute("data-page");
            showPage(pageId);

            // Update active nav link
            navLinks.forEach((nav) => nav.classList.remove("active"));
            this.classList.add("active");
          });
        });

        // Buttons
        startWritingBtn.addEventListener("click", function () {
          showPage("create");
          navLinks.forEach((nav) => nav.classList.remove("active"));
          document
            .querySelector('[data-page="create"]')
            .classList.add("active");
        });

        cancelBtn.addEventListener("click", function () {
          blogForm.reset();
          showPage("home");
          navLinks.forEach((nav) => nav.classList.remove("active"));
          document.querySelector('[data-page="home"]').classList.add("active");
        });

        // Form submission
        blogForm.addEventListener("submit", function (e) {
          e.preventDefault();
          createNewBlog();
        });
      }

      // Show specific page
      function showPage(pageId) {
        pages.forEach((page) => {
          page.classList.remove("active");
        });
        document.getElementById(pageId).classList.add("active");
      }

      // Display featured blogs
      function displayFeaturedBlogs() {
        // For simplicity, we'll consider the first two blogs as featured
        const featuredBlogs = blogs.slice(0, 3);

        featuredBlogsContainer.innerHTML = featuredBlogs
          .map(
            (blog) => `
                <div class="blog-card" data-id="${blog.id}">
                    <img src="${blog.image}" alt="${blog.title}">
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span class="blog-tag">${blog.category}</span>
                            <span>${formatDate(blog.date)}</span>
                        </div>
                        <h3>${blog.title}</h3>
                        <p>${blog.content.substring(0, 100)}...</p>
                        <div class="blog-actions">
                            <span><i class="fas fa-eye"></i> ${
                              blog.views
                            }</span>
                            <span><i class="fas fa-comment"></i> ${
                              blog.comments
                            }</span>
                            <button class="btn btn-primary read-more-btn">Read More</button>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");

        // Add event listeners to read more buttons
        document
          .querySelectorAll("#featuredBlogs .read-more-btn")
          .forEach((btn) => {
            btn.addEventListener("click", function () {
              const blogId = this.closest(".blog-card").getAttribute("data-id");
              showBlogDetail(blogId);
            });
          });
      }

      // Display recent blogs
      function displayRecentBlogs() {
        // Sort blogs by date (newest first) and take the first 5
        const recentBlogs = [...blogs]
          .sort((a, b) => new Date(b.date) - new Date(a.date))
          .slice(0, 5);

        recentBlogsContainer.innerHTML = recentBlogs
          .map(
            (blog) => `
                <div class="blog-card" data-id="${blog.id}">
                    <img src="${blog.image}" alt="${blog.title}">
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span class="blog-tag">${blog.category}</span>
                            <span>${formatDate(blog.date)}</span>
                        </div>
                        <h3>${blog.title}</h3>
                        <p>${blog.content.substring(0, 100)}...</p>
                        <div class="blog-actions">
                            <span><i class="fas fa-eye"></i> ${
                              blog.views
                            }</span>
                            <span><i class="fas fa-comment"></i> ${
                              blog.comments
                            }</span>
                            <button class="btn btn-primary read-more-btn">Read More</button>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");

        // Add event listeners to read more buttons
        document
          .querySelectorAll("#recentBlogs .read-more-btn")
          .forEach((btn) => {
            btn.addEventListener("click", function () {
              const blogId = this.closest(".blog-card").getAttribute("data-id");
              showBlogDetail(blogId);
            });
          });
      }

      // Display all blogs
      function displayAllBlogs() {
        allBlogsContainer.innerHTML = blogs
          .map(
            (blog) => `
                <div class="blog-card" data-id="${blog.id}">
                    <img src="${blog.image}" alt="${blog.title}">
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span class="blog-tag">${blog.category}</span>
                            <span>${formatDate(blog.date)}</span>
                        </div>
                        <h3>${blog.title}</h3>
                        <p>${blog.content.substring(0, 100)}...</p>
                        <div class="blog-actions">
                            <span><i class="fas fa-eye"></i> ${
                              blog.views
                            }</span>
                            <span><i class="fas fa-comment"></i> ${
                              blog.comments
                            }</span>
                            <button class="btn btn-primary read-more-btn">Read More</button>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");

        // Add event listeners to read more buttons
        document.querySelectorAll("#allBlogs .read-more-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const blogId = this.closest(".blog-card").getAttribute("data-id");
            showBlogDetail(blogId);
          });
        });
      }

      // Display user's blogs in dashboard
      function displayMyBlogs() {
        // For simplicity, we'll show all blogs as the user's blogs
        myBlogsContainer.innerHTML = blogs
          .map(
            (blog) => `
                <div class="blog-card" data-id="${blog.id}">
                    <img src="${blog.image}" alt="${blog.title}">
                    <div class="blog-content">
                        <div class="blog-meta">
                            <span class="blog-tag">${blog.category}</span>
                            <span>${formatDate(blog.date)}</span>
                        </div>
                        <h3>${blog.title}</h3>
                        <p>${blog.content.substring(0, 100)}...</p>
                        <div class="blog-actions">
                            <button class="btn btn-warning edit-btn"><i class="fas fa-edit"></i> Edit</button>
                            <button class="btn btn-danger delete-btn"><i class="fas fa-trash"></i> Delete</button>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");

        // Add event listeners to edit and delete buttons
        document.querySelectorAll("#myBlogs .edit-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const blogId = this.closest(".blog-card").getAttribute("data-id");
            editBlog(blogId);
          });
        });

        document.querySelectorAll("#myBlogs .delete-btn").forEach((btn) => {
          btn.addEventListener("click", function () {
            const blogId = this.closest(".blog-card").getAttribute("data-id");
            deleteBlog(blogId);
          });
        });
      }

      // Show blog detail
      function showBlogDetail(blogId) {
        const blog = blogs.find((b) => b.id == blogId);
        if (!blog) return;

        // Increment views
        blog.views++;
        saveBlogsToLocalStorage();

        blogDetailContainer.innerHTML = `
                <div class="blog-header">
                    <h1 class="blog-title">${blog.title}</h1>
                    <div class="blog-meta-large">
                        <span><i class="fas fa-user"></i> ${blog.author}</span>
                        <span><i class="fas fa-calendar"></i> ${formatDate(
                          blog.date
                        )}</span>
                        <span><i class="fas fa-folder"></i> ${
                          blog.category
                        }</span>
                        <span><i class="fas fa-eye"></i> ${
                          blog.views
                        } views</span>
                    </div>
                </div>
                <img src="${blog.image}" alt="${blog.title}" class="blog-image">
                <div class="blog-body">
                    ${blog.content
                      .split("\n")
                      .map((paragraph) => `<p>${paragraph}</p>`)
                      .join("")}
                </div>
                <div class="comments-section">
                    <h3>Comments (${blog.comments})</h3>
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-author">Alex Johnson</span>
                            <span class="comment-date">2 days ago</span>
                        </div>
                        <p>Great article! Very informative and well-written.</p>
                    </div>
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-author">Maria Garcia</span>
                            <span class="comment-date">1 week ago</span>
                        </div>
                        <p>Thanks for sharing these insights. I learned a lot from this post.</p>
                    </div>
                </div>
            `;

        showPage("blog-detail");
      }

      // Create new blog
      function createNewBlog() {
        const title = document.getElementById("blogTitle").value;
        const image =
          document.getElementById("blogImage").value ||
          "https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80";
        const category = document.getElementById("blogCategory").value;
        const content = document.getElementById("blogContent").value;

        const newBlog = {
          id: Date.now(),
          title,
          image,
          content,
          author: "Current User", // In a real app, this would be the logged-in user
          date: new Date().toISOString().split("T")[0],
          category,
          views: 0,
          comments: 0,
        };

        blogs.unshift(newBlog);
        saveBlogsToLocalStorage();

        // Reset form and show home page
        blogForm.reset();
        showPage("home");
        navLinks.forEach((nav) => nav.classList.remove("active"));
        document.querySelector('[data-page="home"]').classList.add("active");

        // Update displays
        displayFeaturedBlogs();
        displayRecentBlogs();
        displayAllBlogs();
        displayMyBlogs();
        updateDashboardStats();

        alert("Blog published successfully!");
      }

      // Edit blog
      function editBlog(blogId) {
        const blog = blogs.find((b) => b.id == blogId);
        if (!blog) return;

        // Populate form with blog data
        document.getElementById("blogTitle").value = blog.title;
        document.getElementById("blogImage").value = blog.image;
        document.getElementById("blogCategory").value = blog.category;
        document.getElementById("blogContent").value = blog.content;

        // Change form to edit mode
        blogForm.dataset.editing = blogId;
        blogForm.querySelector('button[type="submit"]').textContent =
          "Update Blog";

        showPage("create");
        navLinks.forEach((nav) => nav.classList.remove("active"));
        document.querySelector('[data-page="create"]').classList.add("active");
      }

      // Delete blog
      function deleteBlog(blogId) {
        if (confirm("Are you sure you want to delete this blog?")) {
          blogs = blogs.filter((blog) => blog.id != blogId);
          saveBlogsToLocalStorage();

          displayMyBlogs();
          displayFeaturedBlogs();
          displayRecentBlogs();
          displayAllBlogs();
          updateDashboardStats();

          alert("Blog deleted successfully!");
        }
      }

      // Update dashboard statistics
      function updateDashboardStats() {
        document.getElementById("totalBlogs").textContent = blogs.length;

        const totalViews = blogs.reduce((sum, blog) => sum + blog.views, 0);
        document.getElementById("totalViews").textContent = totalViews;

        const totalComments = blogs.reduce(
          (sum, blog) => sum + blog.comments,
          0
        );
        document.getElementById("totalComments").textContent = totalComments;

        // Count blogs from current month
        const currentMonth = new Date().getMonth();
        const currentYear = new Date().getFullYear();
        const blogsThisMonth = blogs.filter((blog) => {
          const blogDate = new Date(blog.date);
          return (
            blogDate.getMonth() === currentMonth &&
            blogDate.getFullYear() === currentYear
          );
        }).length;

        document.getElementById("blogsThisMonth").textContent = blogsThisMonth;
      }

      // Format date
      function formatDate(dateString) {
        const options = { year: "numeric", month: "long", day: "numeric" };
        return new Date(dateString).toLocaleDateString(undefined, options);
      }

      // Save blogs to localStorage
      function saveBlogsToLocalStorage() {
        localStorage.setItem("blogs", JSON.stringify(blogs));
      }

      // Update form submission to handle both create and edit
      blogForm.addEventListener("submit", function (e) {
        e.preventDefault();

        if (this.dataset.editing) {
          updateBlog(this.dataset.editing);
        } else {
          createNewBlog();
        }
      });

      // Update blog function
      function updateBlog(blogId) {
        const title = document.getElementById("blogTitle").value;
        const image = document.getElementById("blogImage").value;
        const category = document.getElementById("blogCategory").value;
        const content = document.getElementById("blogContent").value;

        const blogIndex = blogs.findIndex((b) => b.id == blogId);
        if (blogIndex === -1) return;

        blogs[blogIndex] = {
          ...blogs[blogIndex],
          title,
          image,
          category,
          content,
        };

        saveBlogsToLocalStorage();

        // Reset form and show home page
        blogForm.reset();
        delete blogForm.dataset.editing;
        blogForm.querySelector('button[type="submit"]').textContent =
          "Publish Blog";

        showPage("home");
        navLinks.forEach((nav) => nav.classList.remove("active"));
        document.querySelector('[data-page="home"]').classList.add("active");

        // Update displays
        displayFeaturedBlogs();
        displayRecentBlogs();
        displayAllBlogs();
        displayMyBlogs();
        updateDashboardStats();

        alert("Blog updated successfully!");
      }
    </script>
  </body>
</html>
